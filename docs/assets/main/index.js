System.register("chunks:///_virtual/AudioManager.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"7ea04+g5UFKtpRdKVYKdqvv","AudioManager",void 0);n("AudioManager",function(){function n(){}var t=n.prototype;return t.playClick=function(){},t.playMerge=function(){},t.playError=function(){},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BoardController.ts",["cc","./ItemData.ts","./MoveResult.ts"],(function(t){var o,e,r;return{setters:[function(t){o=t.cclegacy},function(t){e=t.ItemData},function(t){r=t.MoveResult}],execute:function(){o._RF.push({},"be33blB97VHuphWgqZSnKSu","BoardController",void 0);t("BoardController",function(){function t(){this.cols=7,this.rows=7,this.slots=[],this.initializeSlots()}var o=t.prototype;return o.initializeSlots=function(){this.slots=[];for(var t=0;t<this.rows;t++){for(var o=[],e=0;e<this.cols;e++)o.push({col:e,row:t,item:null});this.slots.push(o)}},o.getSlot=function(t,o){return t<0||t>=this.cols||o<0||o>=this.rows?null:this.slots[o][t]},o.getRandomEmptySlot=function(){for(var t=[],o=0;o<this.rows;o++)for(var e=0;e<this.cols;e++){var r=this.slots[o][e];r.item||t.push(r)}return t.length?t[Math.floor(Math.random()*t.length)]:null},o.createItemAt=function(t,o,r,i){var n=this.getSlot(t,o);if(!n||n.item)return null;var s=new e(r,i);return n.item=s,s},o.removeItem=function(t,o){var e=this.getSlot(t,o);if(!e||!e.item)return null;var r=e.item;return e.item=null,r},o.moveItem=function(t,o,e,i){var n=this.getSlot(t,o),s=this.getSlot(e,i);return n&&n.item?s?n===s?r.SAME_SLOT:s.item?r.TARGET_OCCUPIED:(s.item=n.item,n.item=null,r.SUCCESS_MOVE):r.INVALID_TARGET:r.INVALID_SOURCE},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc","./BoardController.ts","./GeneratorController.ts","./MergeManager.ts","./OrderPanel.ts","./HUDController.ts","./ShopPanel.ts","./PlayerData.ts","./ItemController.ts","./ItemData.ts","./MoveResult.ts"],(function(t){var e,n,r,o,i,a,s,h,l,u,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.BoardController},function(t){r=t.GeneratorController},function(t){o=t.MergeManager},function(t){i=t.OrderPanel},function(t){a=t.HUDController},function(t){s=t.ShopPanel},function(t){h=t.PlayerData},function(t){l=t.ItemController},function(t){u=t.ItemGroup},function(t){c=t.MoveResult}],execute:function(){e._RF.push({},"a95b13jtEVAypRdyfDT6Gg8","GameManager",void 0);t("GameManager",function(){function t(){var t=this;this.board=new n,this.mergeManager=new o(this.board),this.hud=new a((function(){return t.onHUDUpdate()})),this.generator=new r(this.board,(function(){return t.onHUDUpdate()})),this.orderPanel=new i(this.board,(function(){return t.handleOrderChange()})),this.shop=new s((function(){return t.onHUDUpdate()})),this.items=new Map,this.onSpawnItem=void 0,this.onRemoveItem=void 0,this.onUpdateItem=void 0,this.onMoveItem=void 0,this.onOrderChange=void 0}var e=t.prototype;return e.start=function(){var t=this;h.instance.startRegeneration((function(){return t.onHUDUpdate()})),this.placeGenerator(),this.onHUDUpdate()},e.key=function(t,e){return t+","+e},e.placeGenerator=function(){var t,e=Math.floor(this.board.cols/2),n=this.board.rows-1,r=this.board.createItemAt(e,n,u.GENERATOR,1),o=new l(r,e,n);this.items.set(this.key(e,n),o),null==(t=this.onSpawnItem)||t.call(this,e,n,r)},e.onGeneratorTap=function(){var t=this.generator.spawnItem();if(t&&t.item){var e,n=t.item,r=new l(n,t.col,t.row);this.items.set(this.key(t.col,t.row),r),null==(e=this.onSpawnItem)||e.call(this,t.col,t.row,n)}this.onHUDUpdate()},e.onItemDropped=function(t,e,n,r){var o=this.board.getSlot(t,e),i=this.board.getSlot(n,r);if(!o||!o.item)return c.INVALID_SOURCE;if(!i)return c.INVALID_TARGET;if(i.item){var a=this.mergeManager.tryMerge(i,o);if(a===c.SUCCESS_MERGE){var s;if(this.items.delete(this.key(t,e)),null==(s=this.onRemoveItem)||s.call(this,t,e),i.item){var h,u=i.item;this.items.set(this.key(n,r),new l(u,n,r)),null==(h=this.onUpdateItem)||h.call(this,n,r,u)}this.onHUDUpdate()}return a}var d=this.board.moveItem(t,e,n,r);if(d===c.SUCCESS_MOVE){var m,f=this.key(t,e),p=this.items.get(f);p&&(p.setGridPosition(n,r),this.items.delete(f),this.items.set(this.key(n,r),p)),null==(m=this.onMoveItem)||m.call(this,t,e,n,r)}return d},e.onOrderSubmit=function(t,e){var n,r=this.orderPanel.tryFulfill(t,e);r&&(this.items.delete(this.key(t,e)),null==(n=this.onRemoveItem)||n.call(this,t,e),this.onHUDUpdate());return r},e.buyHotCocoa=function(){this.shop.buyHotCocoa()&&this.onHUDUpdate()},e.onHUDUpdate=function(){this.hud.refresh()},e.handleOrderChange=function(){var t;null==(t=this.onOrderChange)||t.call(this)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./ItemView.ts","./HUDController.ts","./MoveResult.ts","./PlayerData.ts"],(function(e){var t,n,o,r,i,a,s,l,c,u,h,d,g,f,m,b,p,y,v,w,L,S,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.createForOfIteratorHelperLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Node,c=e.Prefab,u=e.Label,h=e.instantiate,d=e.UITransform,g=e.Vec3,f=e.tween,m=e.easing,b=e.Layers,p=e.Color,y=e.Component},function(e){v=e.GameManager},function(e){w=e.ItemView},function(e){L=e.HUDController},function(e){S=e.MoveResult},function(e){C=e.PlayerData}],execute:function(){var I,z,P,E,R,k,B,D,N,O,T,G,H,U,M,_,F;a._RF.push({},"02241t6q4ZJiZeS+CxL1WWv","GameView",void 0);var V=s.ccclass,A=s.property;e("GameView",(I=V("GameView"),z=A(l),P=A(c),E=A(c),R=A(u),k=A(u),B=A(u),I((O=t((N=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"gridRoot",O,i(t)),r(t,"slotPrefab",T,i(t)),r(t,"itemPrefab",G,i(t)),r(t,"energyLabel",H,i(t)),r(t,"cookiesLabel",U,i(t)),r(t,"orderLabel",M,i(t)),r(t,"cellSize",_,i(t)),r(t,"spacing",F,i(t)),t.manager=new v,t.slots=[],t.items=new Map,t.buyEnergyBtn=null,t.buyEnergyLabel=null,t}n(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;this.ensureFallbackUI(),this.buildGrid(),this.bindManagerCallbacks(),this.manager.hud=new L((function(t,n){return e.updateHUD(t,n)})),this.manager.start(),this.refreshOrderLabel(),this.manager.hud.refresh()},a.buildGrid=function(){if(this.gridRoot){this.slotPrefab||(this.slotPrefab=this.createFallbackSlotPrefab());var e=this.computeGridLayout();this.cellSize=e.cellSize,this.spacing=e.spacing;for(var t=e.startX,n=e.startY,o=0;o<e.rows;o++)for(var r=0;r<e.cols;r++){var i=h(this.slotPrefab);i.setParent(this.gridRoot),(i.getComponent(d)||i.addComponent(d)).setContentSize(this.cellSize,this.cellSize);var a=t+r*(this.cellSize+this.spacing),s=n-o*(this.cellSize+this.spacing);i.setPosition(a,s,0),this.slots.push({node:i,col:r,row:o})}}},a.bindManagerCallbacks=function(){var e=this;this.manager.onSpawnItem=function(t,n,o){e.createItemNode(t,n,o)},this.manager.onRemoveItem=function(t,n){e.removeItemNode(t,n)},this.manager.onUpdateItem=function(t,n,o){e.updateItemNode(t,n,o)},this.manager.onMoveItem=function(t,n,o,r){e.moveItemNode(t,n,o,r)},this.manager.onOrderChange=function(){return e.refreshOrderLabel()}},a.updateHUD=function(e,t){this.energyLabel&&(this.energyLabel.string="â„ï¸ "+e),this.cookiesLabel&&(this.cookiesLabel.string="ðŸª "+t),this.updateBuyEnergyButtonState()},a.onGeneratorButton=function(){this.manager.onGeneratorTap()},a.handleItemDrop=function(e,t){var n=this.worldToGridLocal(t),o=this.findNearestSlot(n);if(o){var r=e.col,i=e.row,a=e.col,s=e.row,l=o.col,c=o.row,u=this.manager.onItemDropped(a,s,l,c);this.applyMoveFeedback(e,u,l,c,r,i)}else{var h=this.getSlot(e.col,e.row);h&&e.snapToSlotWithRejection(h.node)}},a.handleGeneratorTap=function(){this.manager.onGeneratorTap()},a.tryFulfillOrder=function(e){return!!this.manager.onOrderSubmit(e.col,e.row)&&(this.refreshOrderLabel(),!0)},a.onOrderSubmitButton=function(e,t){if(t){var n=t.split(","),o=n[0],r=n[1],i=parseInt(o,10),a=parseInt(r,10);this.manager.onOrderSubmit(i,a),this.refreshOrderLabel()}},a.onBuyHotCocoa=function(){this.manager.buyHotCocoa()},a.createItemNode=function(e,t,n){if(this.gridRoot){this.itemPrefab||(this.itemPrefab=this.createFallbackItemPrefab());var o=this.getSlot(e,t);if(o){var r=h(this.itemPrefab);r.setParent(this.gridRoot),r.setPosition(o.node.position);var i=r.getComponent(d)||r.addComponent(d),a=1.5*this.cellSize;i.setContentSize(a,a),console.log("[createItemNode] Creating item at",e,t,"cellSize:",this.cellSize,"touchSize:",a);var s=r.getComponent(w)||r.addComponent(w);s.setup(this,n,e,t),this.items.set(this.key(e,t),s),console.log("[createItemNode] ItemView setup complete, touch events registered")}}},a.removeItemNode=function(e,t){var n=this.key(e,t),o=this.items.get(n);o&&(o.node.destroy(),this.items.delete(n))},a.updateItemNode=function(e,t,n){var o=this.items.get(this.key(e,t));o?(o.data=n,o.refreshVisual()):this.createItemNode(e,t,n)},a.moveItemNode=function(e,t,n,o){var r=this.key(e,t),i=this.key(n,o),a=this.items.get(r);a&&(this.items.delete(r),this.items.set(i,a),a.col=n,a.row=o)},a.findNearestSlot=function(e){for(var t,n=null,r=Number.MAX_VALUE,i=o(this.slots);!(t=i()).done;){var a=t.value,s=g.subtract(new g,a.node.position,e).lengthSqr();s<r&&(r=s,n=a)}return n},a.getSlot=function(e,t){return this.slots.find((function(n){return n.col===e&&n.row===t}))||null},a.applyMoveFeedback=function(e,t,n,o,r,i){switch(t){case S.SUCCESS_MOVE:var a=this.getSlot(n,o);a&&e.snapToSlot(a.node);break;case S.SUCCESS_MERGE:var s=this.items.get(this.key(n,o));s&&this.playMergeBounce(s.node);break;default:var l=this.getSlot(r,i);l&&e.snapToSlotWithRejection(l.node)}},a.playMergeBounce=function(e){var t=e.scale.clone(),n=new g(1.1*t.x,1.1*t.y,t.z);f(e).to(.12,{scale:n},{easing:m.quadOut}).to(.12,{scale:t},{easing:m.quadIn}).start()},a.key=function(e,t){return e+","+t},a.refreshOrderLabel=function(){if(this.orderLabel){var e=this.manager.orderPanel.currentOrder;this.orderLabel.string="Order: "+e.group+" L"+e.level+" for "+e.reward+"ðŸª"}},a.ensureFallbackUI=function(){if(!this.gridRoot){this.gridRoot=new l("GridRoot"),this.gridRoot.layer=b.Enum.UI_2D;var e=this.gridRoot.addComponent(d);e.setContentSize(1,1),e.anchorX=.5,e.anchorY=.5,this.node.addChild(this.gridRoot)}var t=580;this.energyLabel||(this.energyLabel=this.createHudLabel("EnergyLabel",new g(-250,t,0),32,new p(150,220,255))),this.cookiesLabel||(this.cookiesLabel=this.createHudLabel("CookiesLabel",new g(0,t,0),32,new p(255,200,100))),this.orderLabel||(this.orderLabel=this.createHudLabel("OrderLabel",new g(0,440,0),28,new p(255,255,200))),this.createBuyEnergyButton(new g(250,t,0)),this.createItemLegend(500)},a.createItemLegend=function(e){this.createLegendLabel("DECORATION:",new g(-280,e+20,0),12,new p(200,200,200));for(var t=["ðŸ”´","ðŸŸ¡","âœ¨","ðŸŽ€","ðŸŽ„"],n=0;n<t.length;n++)this.createLegendLabel(t[n],new g(40*n-280,e-10,0),24);this.createLegendLabel("CHARACTER:",new g(80,e+20,0),12,new p(200,200,200));for(var o=["ðŸ§¦","â›„","ðŸ¦Œ","ðŸ‘¸","ðŸŽ…"],r=0;r<o.length;r++)this.createLegendLabel(o[r],new g(80+40*r,e-10,0),24)},a.createLegendLabel=function(e,t,n,o){void 0===o&&(o=p.WHITE);var r=new l("LegendItem");r.layer=b.Enum.UI_2D;var i=r.addComponent(u);return i.string=e,i.fontSize=n,i.color=o,r.setParent(this.node),r.setPosition(t),i},a.createBuyEnergyButton=function(e){var t=this,n=new l("BuyEnergyBtn");n.layer=b.Enum.UI_2D;var o=n.addComponent(u);o.string="âš¡+100 (30ðŸª)",o.fontSize=18,n.addComponent(d).setContentSize(120,36),n.setParent(this.node),n.setPosition(e),this.buyEnergyBtn=n,this.buyEnergyLabel=o,n.on(l.EventType.TOUCH_END,(function(){C.instance.cookies>=t.manager.shop.hotCocoaPrice&&t.onBuyHotCocoa()}),this),this.updateBuyEnergyButtonState()},a.updateBuyEnergyButtonState=function(){if(this.buyEnergyLabel){var e=C.instance.cookies>=this.manager.shop.hotCocoaPrice;this.buyEnergyLabel.color=e?new p(100,255,150):new p(128,128,128)}},a.createHudLabel=function(e,t,n,o){void 0===n&&(n=28),void 0===o&&(o=p.WHITE);var r=new l(e);r.layer=b.Enum.UI_2D;var i=r.addComponent(u);return i.color=o,i.fontSize=n,i.string="",r.setParent(this.node),r.setPosition(t),i},a.createFallbackSlotPrefab=function(){var e=new l("Slot");e.layer=b.Enum.UI_2D;var t=e.addComponent(u);return t.string="â–¡",t.color=new p(180,220,255),(e.getComponent(d)||e.addComponent(d)).setContentSize(this.cellSize,this.cellSize),e},a.createFallbackItemPrefab=function(){var e=new l("Item");e.layer=b.Enum.UI_2D;var t=e.addComponent(u);return t.string="ðŸŽ",t.color=p.WHITE,t.fontSize=64,t.overflow=0,(e.getComponent(d)||e.addComponent(d)).setContentSize(2*this.cellSize,2*this.cellSize),e},a.worldToGridLocal=function(e){if(this.gridRoot){var t=this.gridRoot.getComponent(d);if(t)return t.convertToNodeSpaceAR(e)}var n=this.node.getComponent(d);return n?n.convertToNodeSpaceAR(e):e},a.computeGridLayout=function(){var e=this.manager.board.cols,t=this.manager.board.rows,n=this.node.getComponent(d),o=n?n.width:720,r=n?n.height:1280,i=.1*r,a=r-.2*r-i,s=o-2*(.05*o),l=s/1;l>a&&(s=1*(l=a));var c=Math.min(s/e,l/t),u=.15*c,h=e*c+(e-1)*u,g=t*c+(t-1)*u;if(this.gridRoot){var f=this.gridRoot.getComponent(d);f&&f.setContentSize(h,g);var m=-r/2+i+g/2;this.gridRoot.setPosition(0,m)}return{cols:e,rows:t,cellSize:c,spacing:u,startX:-h/2+c/2,startY:g/2-c/2}},t}(y)).prototype,"gridRoot",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(N.prototype,"slotPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(N.prototype,"itemPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(N.prototype,"energyLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(N.prototype,"cookiesLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(N.prototype,"orderLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(N.prototype,"cellSize",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 70}}),F=t(N.prototype,"spacing",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),D=N))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/GeneratorController.ts",["cc","./ItemData.ts","./PlayerData.ts"],(function(t){var n,e,r;return{setters:[function(t){n=t.cclegacy},function(t){e=t.ItemGroup},function(t){r=t.PlayerData}],execute:function(){n._RF.push({},"87678b9eAVG1788DhN3EjCo","GeneratorController",void 0);t("GeneratorController",function(){function t(t,n){this.board=t,this.onEnergyChange=n}return t.prototype.spawnItem=function(){var t,n=r.instance;if(!n.spendEnergy(5))return null;var o,a=this.board.getRandomEmptySlot();if(!a)return n.energy+=1,null==(o=this.onEnergyChange)||o.call(this),null;var l=Math.random()>.5?e.DECORATION:e.CHARACTER;return this.board.createItemAt(a.col,a.row,l,1),null==(t=this.onEnergyChange)||t.call(this),a},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/HUDController.ts",["cc","./PlayerData.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.PlayerData}],execute:function(){n._RF.push({},"04a36Ho7Y9B8qQcWbMCVomc","HUDController",void 0);t("HUDController",function(){function t(t){this.onUpdate=t}return t.prototype.refresh=function(){var t,n=e.instance.energy,o=e.instance.maxEnergy,r=e.instance.cookies;null==(t=this.onUpdate)||t.call(this,n+"/"+o,r)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemController.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"a208b85N/FGtoMLkBo3h9wX","ItemController",void 0);t("ItemController",function(){function t(t,o,n){this.data=void 0,this.col=void 0,this.row=void 0,this.data=t,this.col=o,this.row=n}var o=t.prototype;return o.setGridPosition=function(t,o){this.col=t,this.row=o},o.onDragStart=function(){},o.onDragEnd=function(){},o.onDrop=function(t,o){this.col=t,this.row=o},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/ItemData.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e82a3AIGMVO6pvqu/SnUexA","ItemData",void 0);var r=t("ItemGroup",function(t){return t.DECORATION="DECORATION",t.CHARACTER="CHARACTER",t.GENERATOR="GENERATOR",t}({}));t("ItemData",function(){function t(t,e){this.group=void 0,this.level=void 0,this.group=t,this.level=e}return t.prototype.getSpriteName=function(){return this.group===r.GENERATOR?"gift_box":""+(this.group===r.DECORATION?"decoration_":"character_")+this.level},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemData.ts"],(function(t){var o,e,i,n,r,s,a,l,d,h,c,u,g;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Label,l=t.Node,d=t.Vec3,h=t.tween,c=t.easing,u=t.Component},function(t){g=t.ItemGroup}],execute:function(){var f,T,v,p,m;r._RF.push({},"974e2p52KtANrmFypUmwSvi","ItemView",void 0);var w=s.ccclass,y=s.property;t("ItemView",(f=w("ItemView"),T=y(a),f((m=o((p=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,i(o,"label",m,n(o)),o.game=null,o.data=void 0,o.col=0,o.row=0,o.dragStartWorld=new d,o.originalPos=new d,o.dragThresholdSqr=225,o.tapTimeThresholdMs=350,o.touchStartTime=0,o.destroyed=!1,o}e(o,t);var r=o.prototype;return r.setup=function(t,o,e,i){this.game=t,this.data=o,this.col=e,this.row=i,this.refreshVisual(),this.registerEvents()},r.refreshVisual=function(){if(this.label||(this.label=this.getComponent(a),this.label)){var t=this.data.getSpriteName();this.label.string=this.emojiFor(t),this.node.name=t}},r.registerEvents=function(){var t,o;console.log("[ItemView.registerEvents] Registering touch events for",null==(t=this.data)?void 0:t.group,"L",null==(o=this.data)?void 0:o.level,"at",this.col,this.row),this.node.on(l.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(l.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(l.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},r.onTouchStart=function(t){var o,e;console.log("[ItemView.onTouchStart] Touch started on",null==(o=this.data)?void 0:o.group,"L",null==(e=this.data)?void 0:e.level);var i=t.getUILocation();this.dragStartWorld.set(i.x,i.y,0),this.node.getWorldPosition(this.originalPos),this.touchStartTime=Date.now()},r.onTouchMove=function(t){var o=t.getUILocation(),e=new d(o.x-this.dragStartWorld.x,o.y-this.dragStartWorld.y,0),i=this.originalPos.clone().add(e);this.node.setWorldPosition(i)},r.onTouchEnd=function(t){if(this.game){var o=t.getUILocation(),e=new d(o.x-this.dragStartWorld.x,o.y-this.dragStartWorld.y,0).lengthSqr(),i=Date.now()-this.touchStartTime,n=e<=900;if(console.log("[ItemView.onTouchEnd] isTap:",n,"touchDragDistSqr:",e,"duration:",i),console.log("[ItemView.onTouchEnd] item col:",this.col,"row:",this.row,"group:",this.data.group,"level:",this.data.level),n)return this.node.setWorldPosition(this.originalPos),this.data.group===g.GENERATOR?void this.game.handleGeneratorTap():(console.log("[ItemView.onTouchEnd] Attempting to fulfill order..."),this.game.tryFulfillOrder(this)?void console.log("[ItemView.onTouchEnd] Order fulfilled successfully!"):void console.log("[ItemView.onTouchEnd] Order not fulfilled - item does not match order"));var r=this.node.getWorldPosition(new d);this.game.handleItemDrop(this,r)}},r.emojiFor=function(t){var o;return null!=(o={gift_box:"ðŸŽ",decoration_1:"ðŸ”´",decoration_2:"ðŸŸ¡",decoration_3:"âœ¨",decoration_4:"ðŸŽ€",decoration_5:"ðŸŽ„",character_1:"ðŸ§¦",character_2:"â›„",character_3:"ðŸ¦Œ",character_4:"ðŸ‘¸",character_5:"ðŸŽ…",empty_slot:"â–¡"}[t])?o:t},r.moveTo=function(t){this.node.setWorldPosition(t)},r.snapToSlot=function(t){var o=t.worldPosition.clone();this.tweenToWorld(o,.2)},r.snapToSlotWithRejection=function(t){var o=this,e=t.worldPosition.clone();this.tweenToWorld(e,.2,(function(){return o.playShake()}))},r.tweenToWorld=function(t,o,e){var i=this;if(this.node&&this.node.isValid){var n=this.node.getWorldPosition(new d),r=new d;h({t:0}).to(o,{t:1},{easing:c.quadOut,onUpdate:function(o){!i.destroyed&&i.node&&i.node.isValid&&(d.lerp(r,n,t,o.t),i.node.setWorldPosition(r))}}).call((function(){!i.destroyed&&i.node&&i.node.isValid&&e&&e()})).start()}},r.playShake=function(){var t=this;if(this.node&&this.node.isValid){var o=this.node.getWorldPosition(new d),e=new d;h({t:0}).to(.15,{t:1},{easing:c.elasticOut,onUpdate:function(i){if(!t.destroyed&&t.node&&t.node.isValid){var n=i.t<.5?-1:1;d.set(e,o.x+6*n,o.y,o.z),t.node.setWorldPosition(e)}}}).call((function(){!t.destroyed&&t.node&&t.node.isValid&&t.node.setWorldPosition(o)})).start()}},r.onDestroy=function(){this.destroyed=!0,this.node.off(l.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(l.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(l.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},o}(u)).prototype,"label",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=p))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BoardController.ts","./GeneratorController.ts","./ItemController.ts","./MergeManager.ts","./MoveResult.ts","./ItemData.ts","./OrderData.ts","./PlayerData.ts","./AudioManager.ts","./GameManager.ts","./GameView.ts","./HUDController.ts","./ItemView.ts","./OrderPanel.ts","./ShopPanel.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MergeManager.ts",["cc","./ItemData.ts","./MoveResult.ts"],(function(e){var t,r,n,u;return{setters:[function(e){t=e.cclegacy},function(e){r=e.ItemGroup,n=e.ItemData},function(e){u=e.MoveResult}],execute:function(){var i;t._RF.push({},"46a5aqR9oxE2YsLbejyGtu3","MergeManager",void 0);var E=((i={})[r.DECORATION]=5,i[r.CHARACTER]=5,i[r.GENERATOR]=1,i);e("MergeManager",function(){function e(e){this.board=e}var t=e.prototype;return t.getMaxLevel=function(e){var t;return null!=(t=E[e])?t:5},t.validateMerge=function(e,t){if(!e||!e.item)return u.INVALID_TARGET;if(!t||!t.item)return u.INVALID_SOURCE;if(e===t)return u.SAME_SLOT;var n=e.item,i=t.item;if(n.group===r.GENERATOR||i.group===r.GENERATOR)return u.CANNOT_MERGE_GENERATOR;if(n.group!==i.group||n.level!==i.level)return u.INVALID_TARGET;var E=this.getMaxLevel(n.group);return n.level>=E?u.MAX_LEVEL_REACHED:u.SUCCESS_MERGE},t.tryMerge=function(e,t){var i=this.validateMerge(e,t);if(i!==u.SUCCESS_MERGE)return i;var E=e.item?e.item.level+1:0,a=e.item?e.item.group:r.DECORATION;return t.item=null,e.item=new n(a,E),u.SUCCESS_MERGE},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MoveResult.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"12e7bKIAVtGyLugRXqQiru0","MoveResult",void 0);E("MoveResult",function(E){return E[E.SUCCESS_MOVE=0]="SUCCESS_MOVE",E[E.SUCCESS_MERGE=1]="SUCCESS_MERGE",E[E.INVALID_SOURCE=2]="INVALID_SOURCE",E[E.INVALID_TARGET=3]="INVALID_TARGET",E[E.TARGET_OCCUPIED=4]="TARGET_OCCUPIED",E[E.CANNOT_MERGE_GENERATOR=5]="CANNOT_MERGE_GENERATOR",E[E.MAX_LEVEL_REACHED=6]="MAX_LEVEL_REACHED",E[E.SAME_SLOT=7]="SAME_SLOT",E}({}));_._RF.pop()}}}));

System.register("chunks:///_virtual/OrderData.ts",["cc","./ItemData.ts"],(function(r){var e,t;return{setters:[function(r){e=r.cclegacy},function(r){t=r.ItemGroup}],execute:function(){e._RF.push({},"5e1aaOQBc5G1oUoLBpooYd1","OrderData",void 0);r("OrderData",function(){function r(){}return r.rewardForLevel=function(r){switch(r){case 1:return 5;case 2:return 15;case 3:return 40;case 4:return 100;case 5:default:return 250}},r.randomOrder=function(){var r=Math.random()>.5?t.DECORATION:t.CHARACTER,e=Math.max(1,Math.min(5,Math.floor(5*Math.random())+1));return{group:r,level:e,reward:this.rewardForLevel(e)}},r.firstOrder=function(){return{group:Math.random()>.5?t.DECORATION:t.CHARACTER,level:2,reward:this.rewardForLevel(2)}},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/OrderPanel.ts",["cc","./PlayerData.ts","./OrderData.ts"],(function(r){var e,t,l;return{setters:[function(r){e=r.cclegacy},function(r){t=r.PlayerData},function(r){l=r.OrderData}],execute:function(){e._RF.push({},"73566ORhc5EWLjENuvPkycQ","OrderPanel",void 0);r("OrderPanel",function(){function r(r,e){this.currentOrder=l.firstOrder(),this.board=r,this.onOrderChange=e}var e=r.prototype;return e.setOrder=function(r){var e;this.currentOrder=r,null==(e=this.onOrderChange)||e.call(this)},e.generateNewOrder=function(){var r;this.currentOrder=l.randomOrder(),null==(r=this.onOrderChange)||r.call(this)},e.tryFulfill=function(r,e){var l=this.board.getSlot(r,e);if(console.log("[tryFulfill] col:",r,"row:",e),console.log("[tryFulfill] slot:",l,"item:",null==l?void 0:l.item),console.log("[tryFulfill] order:",this.currentOrder),!l||!l.item)return console.log("[tryFulfill] FAIL: no slot or no item"),!1;var o=l.item;return console.log("[tryFulfill] comparing:",o.group,"===",this.currentOrder.group,"&&",o.level,"===",this.currentOrder.level),o.group===this.currentOrder.group&&o.level===this.currentOrder.level?(console.log("[tryFulfill] SUCCESS! Adding cookies:",this.currentOrder.reward),this.board.removeItem(r,e),t.instance.addCookies(this.currentOrder.reward),this.generateNewOrder(),!0):(console.log("[tryFulfill] FAIL: item does not match order"),!1)},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var r;n._RF.push({},"a2a6fVYRyFIX4ljbQScc9Mp","PlayerData",void 0);var t=e("PlayerData",function(){function e(){this.maxEnergy=100,this.energy=100,this.cookies=0,this.regenIntervalMs=5e3,this.regenTimer=void 0}var n=e.prototype;return n.startRegeneration=function(e){var n=this;this.regenTimer||(this.regenTimer=setInterval((function(){n.energy<n.maxEnergy&&(n.energy+=1,n.energy>n.maxEnergy&&(n.energy=n.maxEnergy),null==e||e(n.energy))}),this.regenIntervalMs))},n.stopRegeneration=function(){this.regenTimer&&(clearInterval(this.regenTimer),this.regenTimer=void 0)},n.spendEnergy=function(e){return!(this.energy<e)&&(this.energy-=e,!0)},n.addCookies=function(e){this.cookies+=e},n.spendCookies=function(e){return!(this.cookies<e)&&(this.cookies-=e,!0)},e}());r=t,t.instance=new r,n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopPanel.ts",["cc","./PlayerData.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.PlayerData}],execute:function(){n._RF.push({},"7ad39W8vx1EHowJAlS3affa","ShopPanel",void 0);t("ShopPanel",function(){function t(t){this.hotCocoaPrice=30,this.onPurchase=t}return t.prototype.buyHotCocoa=function(){var t,n=e.instance;return!!n.spendCookies(this.hotCocoaPrice)&&(n.energy=n.maxEnergy,null==(t=this.onPurchase)||t.call(this),!0)},t}());n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});